<?xml version="1.0"  encoding="UTF-8" ?>
<project name="kums-hibernate" basedir="." default="oracle-hibernatecode">

	<property name="app.name" value="kums" />
	<property name="root.dir" location="F:/project/kums" />
	<property name="app.dir" location="${root.dir}/defaultroot" />
	<property name="generated.dir" location="${root.dir}/generated" />
	<property name="build.classpath" location="D:/Program Files/Java/jdk1.5.0_03" />
	<property name="webserver.home" location="D:/Program Files/apache-tomcat-5.5.33" />
	<property name="webserver.deploy" location="${webserver.home}/webapps" />
	<property name="src.dir" location="${root.dir}/src" />
	<property name="class.dir" location="${app.dir}/WEB-INF/classes" />
	<property name="lib.dir" location="${app.dir}/WEB-INF/lib" />
	<property name="dist.dir" location="${root.dir}/dist" />
	<property name="doc.dir" location="${root.dir}/api" />
	<property name="build.dir" location="${root.dir}/build" />
	<property name="packages" value="com.kurui.kums.*" />


	<path id="hibernateToolsLib">
		<path location="${lib.dir}/hibernate-tools.jar" />
		<path location="${lib.dir}/hibernate3.jar" />
		<path location="${lib.dir}/commons-logging.jar" />
		<path location="${lib.dir}/dom4j-1.6.1.jar" />
		<path location="${lib.dir}/ojdbc14.jar" />
		<path location="${lib.dir}/mysql-connector-java-5.0.8-bin.jar" />
		<path location="${lib.dir}/commons-collections-3.2.1.jar" />
		<path location="${lib.dir}/cglib-nodep-2.1_3.jar" />
		<path location="${lib.dir}/freemarker.jar" />
		<path location="${lib.dir}/jtidy-r8-20060801.jar" />
		<path location="${lib.dir}/*.jar" />
	</path>

	<taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask" classpathref="hibernateToolsLib">

	</taskdef>



	<!-- 初始化应用程序，删除相关目录-->
	<target name="clean" description="Delete build files">
		<delete dir="${generated.dir}" />
	</target>


	<!-- 初始化创建相关应用目录   -->
	<target name="prepare" depends="clean" description="create build,dist files">
		<mkdir dir="${generated.dir}" />
	</target>



	<target name="oracle-hibernatecode" depends="prepare">
		<hibernatetool destdir="${generated.dir}">
			<jdbcconfiguration propertyfile="${build.dir}/hibernate.properties" revengfile="hibernate.reveng.xml" packagename="com.kurui.kums._entity" />
			<!--由DB导出hbm.xml文件-->
			<hbm2hbmxml templatepath="template">
			</hbm2hbmxml>

			<!-- 由hbm.xml文件生成POJO文件 -->
			<hbm2java jdk5="true" />

			<!-- 生成配置文件  hibernate.cfg.xml-->
			<!--<hbm2cfgxml ejb3="false" />-->

			<!-- dao -->
			<!--<hbm2dao />-->

			<!--Pojo 自定义模版 -->
			<hbmtemplate templatepath="template" template="pojo/KumsPojo.ftl" filepattern="{package-name}/{class-name}.java">
				<property key="ejb3" value="false" />
				<property key="jdk5" value="true" />
				<property key="extends" value="org.apache.struts.action.ActionForm implements Cloneable" />
			</hbmtemplate>
		</hibernatetool>

	</target>

	<target name="mysql-hibernatecode" depends="prepare">
		<hibernatetool destdir="${generated.dir}">
			<jdbcconfiguration propertyfile="${build.dir}/mysql-hibernate.properties" revengfile="mysql.hibernate.reveng.xml" packagename="com.kurui.kums._entity" />
			<!--由DB导出hbm.xml文件-->
			<hbm2hbmxml templatepath="template">
			</hbm2hbmxml>

			<!-- 由hbm.xml文件生成POJO文件 -->
			<hbm2java jdk5="true" />

			<!-- 生成配置文件  hibernate.cfg.xml-->
			<!--<hbm2cfgxml ejb3="false" />-->

			<!-- dao -->
			<!--<hbm2dao />-->

			<!--Pojo 自定义模版 -->
			<hbmtemplate templatepath="template" template="pojo/KumsPojo.ftl" filepattern="{package-name}/{class-name}.java">
				<property key="ejb3" value="false" />
				<property key="jdk5" value="true" />
				<property key="extends" value="org.apache.struts.action.ActionForm implements Cloneable" />
			</hbmtemplate>
		</hibernatetool>

	</target>

</project>